import{i as c,a as m,r as U,b as k,d as s,e as l,w as d,n as D,t as x,v as p,g as E,h as I,o as T}from"./index-BQ8MDUfn.js";const v="/api/member",S={"Content-Type":"multipart/form-data"},b={async checkUsername(t){const{data:o}=await c.get(`${v}/checkusername/${t}`);return console.log("AUTH GET CHECKUSERNAME",o),o},async create(t){const o=new FormData;o.append("username",t.username),o.append("email",t.email),o.append("password",t.password),t.avatar&&o.append("avatar",t.avatar);const{data:i}=await c.post(v,o,S);return console.log("AUTH POST: ",i),i}},V={class:"mt-5 mx-auto",style:{width:"500px"}},A={class:"mb-3 mt-3"},C={for:"username",class:"form-label"},B={class:"mb-3 mt-3"},H={class:"mb-3"},M={class:"mb-3"},N=["disabled"],j={__name:"JoinPage",setup(t){const o=I(),i=m(null),u=m(""),e=U({username:"hong",email:"hong@gmail.com",password:"12",password2:"12",avatar:null}),r=m(!0),w=async()=>{if(!e.username)return alert("사용자 ID를 입력하세요.");r.value=await b.checkUsername(e.username),console.log(r.value,typeof r.value),u.value=r.value?"이미 사용중인 ID입니다.":"사용가능한 ID입니다."},y=()=>{r.value=!0,e.username?u.value="ID 중복 체크를 하셔야 합니다.":u.value=""},g=async()=>{if(e.password!=e.password2)return alert("비밀번호가 일치하지 않습니다.");i.value.files.length>0&&(e.avatar=i.value.files[0]);try{await b.create(e),o.push({name:"home"})}catch(f){console.error(f)}};return(f,a)=>(T(),k("div",V,[a[15]||(a[15]=s("h1",{class:"my-5"},[s("i",{class:"fa-solid fa-user-plus"}),l(" 회원가입 ")],-1)),s("form",{onSubmit:E(g,["prevent"])},[s("div",A,[s("label",C,[a[4]||(a[4]=s("i",{class:"fa-solid fa-user"},null,-1)),a[5]||(a[5]=l(" 사용자ID : ")),s("button",{type:"button",class:"btn btn-success btn-sm py-0 me-2",onClick:w}," ID 중복 확인 "),s("span",{class:D(r.value.value?"text-primary":"text-danger")},x(u.value),3)]),d(s("input",{type:"text",class:"form-control",placeholder:"사용자 ID",id:"username",onInput:y,"onUpdate:modelValue":a[0]||(a[0]=n=>e.username=n)},null,544),[[p,e.username]])]),a[11]||(a[11]=l("   ")),s("div",null,[a[6]||(a[6]=s("label",{for:"avatar",class:"form-label"},[s("i",{class:"fa-solid fa-user-astronaut"}),l(" 아바타 이미지: ")],-1)),s("input",{type:"file",class:"form-control",ref_key:"avatar",ref:i,id:"avatar",accept:"image/png, image/jpeg"},null,512)]),a[12]||(a[12]=l("   ")),s("div",B,[a[7]||(a[7]=s("label",{for:"email",class:"form-label"},[s("i",{class:"fa-solid fa-envelope"}),l(" email ")],-1)),d(s("input",{type:"email",class:"form-control",placeholder:"Email",id:"email","onUpdate:modelValue":a[1]||(a[1]=n=>e.email=n)},null,512),[[p,e.email]])]),a[13]||(a[13]=l("   ")),s("div",H,[a[8]||(a[8]=s("label",{for:"password",class:"form-label"},[s("i",{class:"fa-solid fa-lock"}),l(" 비밀번호: ")],-1)),d(s("input",{type:"password",class:"form-control",placeholder:"비밀번호",id:"password","onUpdate:modelValue":a[2]||(a[2]=n=>e.password=n)},null,512),[[p,e.password]])]),a[14]||(a[14]=l(" 회원관리–회원가입 ")),s("div",M,[a[9]||(a[9]=s("label",{for:"password",class:"form-label"},[s("i",{class:"fa-solid fa-lock"}),l(" 비밀번호 확인: ")],-1)),d(s("input",{type:"password",class:"form-control",placeholder:"비밀번호 확인",id:"password2","onUpdate:modelValue":a[3]||(a[3]=n=>e.password2=n)},null,512),[[p,e.password2]])]),s("button",{type:"submit",class:"btn btn-primary mt-4",disabled:r.value},a[10]||(a[10]=[s("i",{class:"fa-solid fa-user-plus"},null,-1),l(" 확인 ")]),8,N)],32)]))}};export{j as default};
