import{u as P,r as v,c as y,a as g,b as u,d as o,e as l,f as h,w as n,v as d,t as k,g as x,h as V,o as p}from"./index-B2B-pU4F.js";import{a as S}from"./authApi-KvnEM0X7.js";const _={class:"mt-5 mx-auto",style:{width:"500px"}},B={class:"mb-3"},I={class:"mb-3"},N={class:"mb-3"},U={key:0,class:"text-danger"},A=["disabled"],M={__name:"ChangePasswordPage",setup(C){const w=V(),c=P(),a=v({username:c.username,oldPassword:"",newPassword:"",newPassword2:""}),m=y(()=>!a.oldPassword||!a.newPassword||!a.newPassword2),e=g(""),f=()=>e.value="",i=()=>e.value="",b=async()=>{var r;if(console.log("changePassword : ",a),a.newPassword!=a.newPassword2){e.value="새 비밀번호가 일치하지 않습니다.";return}try{await S.changePassword(a),alert("비밀번호를 수정했습니다."),w.push({name:"profile"})}catch(s){(r=s.response)!=null&&r.data?e.value=s.response.data:(e.value="비밀번호 변경 중 오류가 발생했습니다.",console.error(s))}};return(r,s)=>(p(),u("div",_,[s[7]||(s[7]=o("h1",{class:"my-5"},[o("i",{class:"fa-solid fa-lock"}),l(" 비밀번호 변경 ")],-1)),o("form",{onSubmit:x(b,["prevent"])},[o("div",B,[s[3]||(s[3]=o("label",{for:"password",class:"form-label"},[o("i",{class:"fa-solid fa-lock"}),l(" 이전 비밀번호: ")],-1)),n(o("input",{type:"password",class:"form-control",placeholder:"이전 비밀번호","onUpdate:modelValue":s[0]||(s[0]=t=>a.oldPassword=t),onInput:f},null,544),[[d,a.oldPassword]])]),o("div",I,[s[4]||(s[4]=o("label",{for:"password",class:"form-label"},[o("i",{class:"fa-solid fa-lock"}),l(" 새 비밀번호: ")],-1)),n(o("input",{type:"password",class:"form-control",placeholder:"새 비밀번호","onUpdate:modelValue":s[1]||(s[1]=t=>a.newPassword=t),onInput:i},null,544),[[d,a.newPassword]])]),o("div",N,[s[5]||(s[5]=o("label",{for:"password",class:"form-label"},[o("i",{class:"fa-solid fa-lock"}),l(" 새 비밀번호 확인: ")],-1)),n(o("input",{type:"password",class:"form-control",placeholder:"새 비밀번호 확인","onUpdate:modelValue":s[2]||(s[2]=t=>a.newPassword2=t),onInput:i},null,544),[[d,a.newPassword2]])]),e.value?(p(),u("div",U,k(e.value),1)):h("",!0),o("button",{type:"submit",class:"btn btn-primary mt-4",disabled:m.value},s[6]||(s[6]=[o("i",{class:"fa-solid fa-check"},null,-1),l(" 확인 ")]),8,A)],32)]))}};export{M as default};
